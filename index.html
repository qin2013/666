<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ˜Ÿçƒæ¸¸æˆæ¨å¹¿ç³»ç»Ÿ - å¿«æ‰‹è´¦å·æ¨å¹¿èµšé’±å¹³å°</title>
    <style>
        :root {
            --primary-color: #ff6b00;
            --secondary-color: #ff3b00;
            --light-bg: #fff8f0;
            --card-bg: #ffffff;
            --text-color: #333333;
            --light-text: #999999;
            --border-color: #ffe0cc;
        }
        
        body {
            font-family: 'PingFang SC', 'Helvetica Neue', Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--light-bg);
            color: var(--text-color);
            line-height: 1.6;
        }
        
        .container {
            max-width: 100%;
            padding: 15px;
            padding-bottom: 70px;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 20px 0;
            text-align: center;
            border-radius: 0 0 15px 15px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            position: relative;
        }
        
        h1 {
            margin: 0;
            font-size: 22px;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.2);
        }
        
        .user-header {
            position: absolute;
            right: 15px;
            top: 15px;
            display: flex;
            align-items: center;
        }
        
        .user-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: rgba(255,255,255,0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-left: 10px;
            color: white;
            font-weight: bold;
            cursor: pointer;
        }
        
        .tab-bar {
            display: flex;
            background: white;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            z-index: 100;
        }
        
        .tab-item {
            flex: 1;
            text-align: center;
            padding: 12px 0;
            color: var(--light-text);
            font-size: 14px;
        }
        
        .tab-item.active {
            color: var(--primary-color);
            font-weight: bold;
        }
        
        .tab-item i {
            display: block;
            font-size: 20px;
            margin-bottom: 4px;
        }
        
        .banner {
            background: linear-gradient(135deg, var(--secondary-color), #ff1a00);
            color: white;
            padding: 12px 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
            font-weight: bold;
            font-size: 16px;
            box-shadow: 0 4px 8px rgba(255, 59, 0, 0.3);
        }
        
        .card {
            background: var(--card-bg);
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border: 1px solid var(--border-color);
        }
        
        .money-card {
            background: linear-gradient(135deg, #fff4e6, #ffebcc);
            border-left: 4px solid var(--primary-color);
        }
        
        .highlight {
            color: var(--secondary-color);
            font-weight: bold;
        }
        
        .big-money {
            font-size: 24px;
            color: #ff1a00;
            font-weight: bold;
            text-align: center;
            margin: 10px 0;
        }
        
        .btn {
            display: block;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            text-align: center;
            padding: 12px;
            border-radius: 25px;
            margin: 20px 0;
            text-decoration: none;
            font-weight: bold;
            box-shadow: 0 4px 12px rgba(255, 107, 0, 0.3);
            border: none;
            width: 100%;
            font-size: 16px;
            cursor: pointer;
        }
        
        .steps {
            margin: 20px 0;
        }
        
        .step {
            display: flex;
            margin-bottom: 15px;
            align-items: center;
        }
        
        .step-num {
            background: var(--primary-color);
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            text-align: center;
            line-height: 24px;
            margin-right: 10px;
            flex-shrink: 0;
        }
        
        .user-list {
            margin: 15px 0;
        }
        
        .user-item {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px dashed #ffd9cc;
        }
        
        .user-avatar-small {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #ffebcc;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            color: var(--primary-color);
            font-weight: bold;
        }
        
        .user-info {
            flex-grow: 1;
        }
        
        .user-earnings {
            color: var(--secondary-color);
            font-weight: bold;
            white-space: nowrap;
        }
        
        footer {
            text-align: center;
            padding: 15px;
            color: var(--light-text);
            font-size: 12px;
            margin-top: 20px;
        }
        
        .price-list {
            margin: 15px 0;
        }
        
        .price-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #ffe6d6;
        }
        
        .qr-code {
            text-align: center;
            margin: 20px 0;
        }
        
        .qr-code img {
            width: 150px;
            height: 150px;
            border: 1px solid #eee;
            padding: 5px;
            background: white;
        }
        
        /* å›¾ç‰‡é¢„è§ˆ */
        .proof-preview {
            max-width: 100%;
            max-height: 200px;
            margin-top: 10px;
            border-radius: 5px;
            display: none;
        }
        
        /* éŸ³ä¹æ§åˆ¶ */
        .music-control {
            position: fixed;
            top: 10px;
            left: 10px;
            z-index: 1000;
            background: rgba(255,255,255,0.8);
            padding: 5px;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        /* è§„åˆ™ä»‹ç»æ ·å¼ */
        .rules-container {
            margin: 15px 0;
        }
        
        .rule-item {
            margin-bottom: 10px;
            padding-left: 15px;
            position: relative;
        }
        
        .rule-item:before {
            content: "â€¢";
            position: absolute;
            left: 0;
            color: var(--primary-color);
            font-weight: bold;
        }
        
        /* ä»»åŠ¡æäº¤è¡¨å• */
        .task-form {
            margin-top: 15px;
        }
        
        .task-proof-container {
            margin-top: 10px;
        }
        
        .task-proof-required {
            color: red;
            font-size: 12px;
            margin-left: 5px;
        }
        
        /* ç»Ÿè®¡ä¿¡æ¯ */
        .stats-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 15px 0;
        }
        
        .stat-card {
            flex: 1;
            min-width: 120px;
            background: white;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: var(--primary-color);
            margin: 5px 0;
        }
        
        .stat-label {
            font-size: 12px;
            color: var(--light-text);
        }
        
        /* æç°è®°å½• */
        .withdraw-item {
            padding: 10px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
        }
        
        .withdraw-status {
            padding: 3px 8px;
            border-radius: 3px;
            font-size: 12px;
        }
        
        .status-pending {
            background: #fff3cd;
            color: #856404;
        }
        
        .status-success {
            background: #d4edda;
            color: #155724;
        }
        
        .status-failed {
            background: #f8d7da;
            color: #721c24;
        }
        
        /* QQç¾¤æé†’ */
        .qq-group-notice {
            background: #f8f9fa;
            border-left: 4px solid #17a2b8;
            padding: 10px;
            margin: 15px 0;
            border-radius: 0 5px 5px 0;
        }
        
        /* ç”¨æˆ·é¡»çŸ¥å¼¹çª— */
        .notice-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.7);
            z-index: 1002;
            justify-content: center;
            align-items: center;
        }
        
        .notice-content {
            background: white;
            border-radius: 10px;
            width: 90%;
            max-width: 500px;
            max-height: 80vh;
            overflow-y: auto;
            padding: 20px;
            animation: fadeIn 0.3s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .notice-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            color: var(--primary-color);
            text-align: center;
        }
        
        .notice-item {
            margin-bottom: 10px;
            padding-left: 15px;
            position: relative;
        }
        
        .notice-item:before {
            content: "â€¢";
            position: absolute;
            left: 0;
            color: var(--primary-color);
            font-weight: bold;
        }
        
        .notice-confirm-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            margin-top: 20px;
            width: 100%;
            font-weight: bold;
            cursor: pointer;
        }
        
        /* å›¾ç‰‡ä¸Šä¼ åŒºåŸŸ */
        .upload-area {
            border: 2px dashed #ffd9cc;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            margin-bottom: 10px;
            transition: all 0.3s;
        }
        
        .upload-area:hover {
            border-color: var(--primary-color);
            background: #fff8f0;
        }
        
        .upload-area i {
            font-size: 40px;
            color: var(--primary-color);
            margin-bottom: 10px;
        }
        
        .upload-text {
            font-size: 14px;
            color: var(--light-text);
        }
        
        /* ä»»åŠ¡è®°å½•æ ·å¼ */
        .task-item {
            padding: 10px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        /* å®¡æ ¸çŠ¶æ€æ ‡ç­¾ */
        .status-label {
            padding: 2px 8px;
            border-radius: 3px;
            font-size: 12px;
            display: inline-block;
        }
        
        .status-pending {
            background: #fff3cd;
            color: #856404;
        }
        
        .status-approved {
            background: #d4edda;
            color: #155724;
        }
        
        .status-rejected {
            background: #f8d7da;
            color: #721c24;
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</head>
<body>
    <!-- ç”¨æˆ·é¡»çŸ¥å¼¹çª— -->
    <div class="notice-modal" id="notice-modal">
        <div class="notice-content">
            <div class="notice-title"><i class="fas fa-exclamation-circle"></i> ç”¨æˆ·é¡»çŸ¥</div>
            <div class="notice-item">è¯·ç¡®ä¿æ‚¨ä¸Šä¼ çš„æˆªå›¾æ¸…æ™°å¯è§ï¼ŒåŒ…å«å®Œæ•´çš„å¿«æ‰‹å…³æ³¨æˆ–æ¸¸æˆä¸‹è½½ç•Œé¢</div>
            <div class="notice-item">åŒä¸€è®¾å¤‡å’Œå¿«æ‰‹å¤©å†…åªèƒ½å®Œæˆä¸€æ¬¡ä¸‹è½½ä»»åŠ¡ï¼Œè¯·å‹¿é‡å¤æäº¤å¦åˆ™è´¦å·å°ç¦å¤„ç†</div>
            <div class="notice-item">æ¯æœˆ1å·å’Œ16æç°ï¼Œæç°éœ€è”ç³»QQ: 3965723380</div>
            <div class="notice-item">ç¦æ­¢ä½¿ç”¨ä»»ä½•ä½œå¼Šæ‰‹æ®µï¼Œè¿è§„è€…å°†å°å·å¤„ç†</div>
            <div class="notice-item">æ¨å¹¿æ—¶è¯·éµå®ˆå¹³å°è§„åˆ™ï¼Œä¸å¾—å‘å¸ƒè¿è§„å†…å®¹</div>
            <div class="notice-item">æ¯æ—¥æ¨å¹¿äººæ•°æ— ä¸Šé™ï¼Œå¤šåŠ³å¤šå¾—</div>
            <div class="notice-item">å¦‚æœ‰ç–‘é—®ï¼Œè¯·åŠæ—¶è”ç³»å®¢æœQQ: 3965723380</div>
            <button class="notice-confirm-btn" onclick="hideNotice()">æˆ‘å·²é˜…è¯»å¹¶åŒæ„</button>
        </div>
    </div>
    
    <!-- éŸ³ä¹æ§åˆ¶æŒ‰é’® -->
    <div class="music-control" id="music-control" onclick="toggleMusic()">
        <i class="fas fa-music"></i>
    </div>
    
    <!-- èƒŒæ™¯éŸ³ä¹ - è½»éŸ³ä¹ç‰ˆæœ¬ -->
    <audio id="bg-music" loop>
        <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-9.mp3" type="audio/mpeg">
    </audio>
    
    <!-- ç‚¹å‡»éŸ³æ•ˆ -->
    <audio id="click-sound">
        <source src="https://www.soundjay.com/buttons/sounds/button-09.mp3" type="audio/mpeg">
    </audio>
    
    <header>
        <div class="container">
            <h1>æ˜Ÿçƒæ¸¸æˆæ¨å¹¿ç³»ç»Ÿ</h1>
            <p>å¿«æ‰‹è´¦å·æ¨å¹¿èµšé’±å¹³å°</p>
            <div class="user-header">
                <span id="username-display">æœªç™»å½•</span>
                <div class="user-avatar" id="user-avatar" onclick="toggleUserMenu()"><i class="fas fa-user"></i></div>
            </div>
        </div>
    </header>
    
    <div class="user-menu" id="user-menu" style="display: none; position: absolute; right: 15px; top: 70px; background: white; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.2); z-index: 1000; width: 150px;">
        <div style="padding: 10px; border-bottom: 1px solid #eee; cursor: pointer;" onclick="showLoginForm()"><i class="fas fa-sign-in-alt"></i> ç”¨æˆ·ç™»å½•</div>
        <div style="padding: 10px; cursor: pointer;" id="logout-btn" onclick="logout()"><i class="fas fa-sign-out-alt"></i> é€€å‡ºç™»å½•</div>
    </div>
    
    <!-- ç™»å½•è¡¨å• -->
    <div id="login-modal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 1001; justify-content: center; align-items: center;">
        <div style="background: white; padding: 20px; border-radius: 10px; width: 90%; max-width: 400px;">
            <h2 style="margin-top: 0;">ç”¨æˆ·ç™»å½•</h2>
            <div class="form-group">
                <label>æ‰‹æœºå·ç </label>
                <input type="text" id="login-phone" class="form-control" placeholder="è¯·è¾“å…¥æ‰‹æœºå·">
            </div>
            <div class="form-group">
                <label>éªŒè¯ç </label>
                <div style="display: flex;">
                    <input type="text" id="login-code" class="form-control" placeholder="è¯·è¾“å…¥éªŒè¯ç " style="flex: 1;">
                    <button id="send-code-btn" style="margin-left: 10px; padding: 0 10px; background: var(--primary-color); color: white; border: none; border-radius: 5px; cursor: pointer;">è·å–éªŒè¯ç </button>
                </div>
            </div>
            <button class="btn" onclick="userLogin()">ç™»å½•</button>
            <button style="margin-top: 10px; width: 100%; padding: 10px; background: #f0f0f0; border: none; border-radius: 5px; cursor: pointer;" onclick="hideLoginForm()">å–æ¶ˆ</button>
        </div>
    </div>
    
    <!-- æç°æ¨¡æ€æ¡† -->
    <div id="withdraw-modal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 1001; justify-content: center; align-items: center;">
        <div style="background: white; padding: 20px; border-radius: 10px; width: 90%; max-width: 400px;">
            <h2 style="margin-top: 0;">ç”³è¯·æç°</h2>
            <div class="form-group">
                <label>æç°é‡‘é¢</label>
                <input type="number" class="form-control" id="withdraw-amount" placeholder="è¯·è¾“å…¥æç°é‡‘é¢">
            </div>
            <div class="form-group">
                <label>æç°æ–¹å¼</label>
                <select class="form-control" id="withdraw-method">
                    <option value="wechat">å¾®ä¿¡æ”¯ä»˜</option>
                    <option value="alipay">æ”¯ä»˜å®</option>
                </select>
            </div>
            <div class="form-group">
                <label>æ”¶æ¬¾è´¦å·</label>
                <input type="text" class="form-control" id="withdraw-account" placeholder="è¯·è¾“å…¥æ”¶æ¬¾è´¦å·">
            </div>
            <div style="font-size: 12px; color: var(--light-text); margin-bottom: 15px;">
                æç°éœ€è”ç³»QQ: 3965723380 å¤„ç†
            </div>
            <button class="btn" onclick="submitWithdraw()">æäº¤æç°ç”³è¯·</button>
            <button style="margin-top: 10px; width: 100%; padding: 10px; background: #f0f0f0; border: none; border-radius: 5px; cursor: pointer;" onclick="hideWithdrawModal()">å–æ¶ˆ</button>
        </div>
    </div>
    
    <!-- ä¸»å†…å®¹åŒºåŸŸ -->
    <div class="container" id="main-content">
        <!-- QQç¾¤æé†’ -->
        <div class="qq-group-notice" id="qq-group-notice">
            <strong><i class="fas fa-info-circle"></i> æç°æé†’ï¼š</strong>æç°è¯·æ·»åŠ QQç¾¤ä¸»: <span class="highlight">3965723380</span> è”ç³»å¤„ç†ã€‚
        </div>
        
        <!-- é¦–é¡µ -->
        <div id="home-tab">
            <div class="banner">
                ğŸ‰ ä»Šæ—¥å·²æœ‰<span id="today-users">218</span>äººå‚ä¸ï¼Œæœ€é«˜èµšÂ¥<span id="max-earnings">386</span>ï¼ç«‹å³åŠ å…¥ï¼ ğŸ‰
            </div>
            
            <div class="card money-card">
                <div class="big-money">å…³æ³¨=0.1å…ƒ &nbsp; ä¸‹è½½=5å…ƒ</div>
                <div style="text-align: center;">æ¯æ¨å¹¿1äººä¸‹è½½æ¸¸æˆï¼Œç«‹å¾—5å…ƒç°é‡‘å¥–åŠ±ï¼</div>
            </div>
            
            <div class="card">
                <h2><i class="fas fa-money-bill-wave"></i> æ”¶ç›Šæ˜ç»†</h2>
                <div class="price-list">
                    <div class="price-item">
                        <span>å¿«æ‰‹è´¦å·å…³æ³¨</span>
                        <span class="highlight">+0.1å…ƒ/äºº</span>
                    </div>
                    <div class="price-item">
                        <span>ä¸‹è½½å®‰è£…æ¸¸æˆ</span>
                        <span class="highlight">+5å…ƒ/äºº</span>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <h2><i class="fas fa-mobile-alt"></i> å¦‚ä½•å‚ä¸ï¼Ÿ</h2>
                <div class="steps">
                    <div class="step">
                        <div class="step-num">1</div>
                        <div>å…³æ³¨ã€æ˜Ÿçƒæ¸¸æˆã€‘å¿«æ‰‹å·: 4713343918</div>
                    </div>
                    <div class="step">
                        <div class="step-num">2</div>
                        <div>è½¬å‘æŒ‡å®šä½œå“ç»™ä½ çš„å¥½å‹æˆ–ç¾¤èŠ</div>
                    </div>
                    <div class="step">
                        <div class="step-num">3</div>
                        <div>å¥½å‹å®Œæˆå…³æ³¨/ä¸‹è½½åï¼Œç³»ç»Ÿè‡ªåŠ¨ç»“ç®—</div>
                    </div>
                </div>
                
                <h3 style="margin-top: 20px;">æ¨å¹¿ä½œå“é“¾æ¥</h3>
                <div style="background: #f9f9f9; padding: 10px; border-radius: 5px; margin-top: 10px;">
                    <p><a href="https://v.kuaishou.com/2C2bXWB" target="_blank">https://v.kuaishou.com/2C2bXWB</a></p>
                    <p><a href="https://v.kuaishou.com/2B3koRE" target="_blank">https://v.kuaishou.com/2B3koRE</a></p>
                    <p><a href="https://v.kuaishou.com/2AKRu3o" target="_blank">https://v.kuaishou.com/2AKRu3o</a></p>
                    <p><a href="https://v.kuaishou.com/2CaQ8T7" target="_blank">https://v.kuaishou.com/2CaQ8T7</a></p>
                </div>
            </div>
            
            <div class="card">
                <h2><i class="fas fa-trophy"></i> ä»Šæ—¥èµšé’±æ¦œ</h2>
                <div class="user-list" id="earnings-leaderboard">
                    <!-- åŠ¨æ€ç”Ÿæˆèµšé’±æ¦œ -->
                </div>
            </div>
            
            <div class="card">
                <h2><i class="fas fa-lightbulb"></i> æ¨å¹¿æŠ€å·§</h2>
                <ul>
                    <li>åˆ†äº«åˆ°å¾®ä¿¡ç¾¤ã€æœ‹å‹åœˆï¼Œé™„ä¸Šä½ çš„ä¸“å±é‚€è¯·ç </li>
                    <li>å‘Šè¯‰å¥½å‹"å…³æ³¨å°±æœ‰é’±ï¼Œä¸‹è½½èµš5å…ƒ"</li>
                    <li>æ¯å¤©åšæŒæ¨å¹¿3å°æ—¶ï¼Œæœˆå…¥3000+å¾ˆè½»æ¾</li>
                    <li>ç»„å»ºå›¢é˜Ÿï¼Œè·å¾—ä¸‹çº§20%æ”¶ç›Šåˆ†æˆ</li>
                </ul>
            </div>
            
            <div class="card">
                <h2><i class="fas fa-info-circle"></i> æ´»åŠ¨è§„åˆ™</h2>
                <div class="rules-container">
                    <div class="rule-item">æ”¶ç›Šæ»¡10å…ƒå¯æç°ï¼Œéœ€è”ç³»QQç¾¤ä¸»: 3965723380 å¤„ç†</div>
                    <div class="rule-item">åŒä¸€å¿«æ‰‹è´¦å·è®¾å¤‡2å¤©åªèƒ½åšä¸€æ¬¡ä¸‹è½½ä»»åŠ¡</div>
                    <div class="rule-item">å¯ä»¥æ‰¾æœ‹å‹å¸®å¿™åšä»»åŠ¡ï¼Œä½†å¿…é¡»ä½¿ç”¨ä¸åŒçš„å¿«æ‰‹è´¦å·</div>
                    <div class="rule-item">æäº¤å…³æ³¨ä»»åŠ¡éœ€æä¾›å¿«æ‰‹å…³æ³¨æˆªå›¾</div>
                    <div class="rule-item">æäº¤æ¸¸æˆä»»åŠ¡éœ€æä¾›5åˆ†é’Ÿä»¥ä¸Šçš„æ¸¸ç©è®°å½•æˆªå›¾</div>
                    <div class="rule-item">ç¦æ­¢åˆ·é‡ï¼Œè¿è§„è€…å°å·å¤„ç†</div>
                    <div class="rule-item">æ´»åŠ¨æˆªæ­¢æ—¶é—´ï¼š2027å¹´6æœˆ4æ—¥</div>
                </div>
            </div>
            
            <button class="btn" onclick="switchTab('task')"><i class="fas fa-check-circle"></i> æäº¤ä»»åŠ¡å®¡æ ¸</button>
        </div>
        
        <!-- æˆ‘çš„æ”¶ç›Š -->
        <div id="earnings-tab" style="display: none;">
            <div class="card">
                <h2><i class="fas fa-wallet"></i> æˆ‘çš„é’±åŒ…</h2>
                <div style="text-align: center; margin: 20px 0;">
                    <div style="font-size: 14px; color: var(--light-text);">å¯æç°é‡‘é¢</div>
                    <div style="font-size: 36px; font-weight: bold; color: var(--primary-color);" id="withdrawable-amount">Â¥0.00</div>
                </div>
                
                <div class="stats-container">
                    <div class="stat-card">
                        <div class="stat-value" id="today-earnings">Â¥0</div>
                        <div class="stat-label">ä»Šæ—¥æ”¶ç›Š</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="month-earnings">Â¥0</div>
                        <div class="stat-label">æœ¬æœˆæ”¶ç›Š</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="total-earnings">Â¥0</div>
                        <div class="stat-label">ç´¯è®¡æ”¶ç›Š</div>
                    </div>
                </div>
                
                <button class="btn" onclick="showWithdrawModal()" id="withdraw-btn" disabled><i class="fas fa-money-bill-wave"></i> ç”³è¯·æç°</button>
                <div style="text-align: center; font-size: 12px; color: var(--light-text);">æç°éœ€è”ç³»QQ: 3965723380</div>
            </div>
            
            <div class="card">
                <h2><i class="fas fa-chart-line"></i> æ”¶ç›Šæ˜ç»†</h2>
                <div id="earnings-details">
                    <div style="text-align: center; padding: 30px; color: var(--light-text);">
                        <i class="fas fa-wallet" style="font-size: 40px; margin-bottom: 10px;"></i>
                        <p>æš‚æ— æ”¶ç›Šè®°å½•</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ä»»åŠ¡æäº¤ -->
        <div id="task-tab" style="display: none;">
            <div class="card">
                <h2><i class="fas fa-tasks"></i> æäº¤æ¨å¹¿ä»»åŠ¡</h2>
                <div class="task-form">
                    <div class="form-group">
                        <label>æ¨å¹¿æ–¹å¼</label>
                        <select class="form-control" id="task-type">
                            <option value="follow">å¿«æ‰‹è´¦å·å…³æ³¨</option>
                            <option value="download">æ¸¸æˆä¸‹è½½</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>æ¨å¹¿äººæ•°</label>
                        <input type="number" class="form-control" id="task-count" placeholder="è¯·è¾“å…¥æ¨å¹¿äººæ•°">
                    </div>
                    <div class="form-group">
                        <label>æ¨å¹¿æˆªå›¾è¯æ˜ <span class="task-proof-required">*å¿…å¡«</span></label>
                        <div class="task-proof-container">
                            <div class="upload-area" onclick="document.getElementById('task-proof').click()">
                                <i class="fas fa-cloud-upload-alt"></i>
                                <div class="upload-text">ç‚¹å‡»ä¸Šä¼ æˆªå›¾</div>
                                <div style="font-size: 12px; color: var(--light-text);" id="proof-requirement">è¯·ä¸Šä¼ å¿«æ‰‹å…³æ³¨æˆªå›¾</div>
                            </div>
                            <input type="file" id="task-proof" accept="image/*" style="display: none;" onchange="previewProof()">
                            <img id="proof-preview" class="proof-preview" alt="æˆªå›¾é¢„è§ˆ">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>å¤‡æ³¨è¯´æ˜</label>
                        <textarea class="form-control" id="task-remark" rows="3" placeholder="å¯å¡«å†™æ¨å¹¿è¯¦æƒ…"></textarea>
                    </div>
                    <button class="btn" onclick="submitTask()"><i class="fas fa-paper-plane"></i> æäº¤å®¡æ ¸</button>
                </div>
            </div>
            
            <div class="card">
                <h2><i class="fas fa-history"></i> ä»»åŠ¡è®°å½•</h2>
                <div id="task-history">
                    <div style="text-align: center; padding: 30px; color: var(--light-text);">
                        <i class="fas fa-history" style="font-size: 40px; margin-bottom: 10px;"></i>
                        <p>æš‚æ— ä»»åŠ¡è®°å½•</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- åº•éƒ¨å¯¼èˆªæ  -->
    <div class="tab-bar">
        <div class="tab-item active" onclick="switchTab('home')">
            <i class="fas fa-home"></i>
            <span>é¦–é¡µ</span>
        </div>
        <div class="tab-item" onclick="switchTab('earnings')">
            <i class="fas fa-wallet"></i>
            <span>æˆ‘çš„æ”¶ç›Š</span>
        </div>
        <div class="tab-item" onclick="switchTab('task')">
            <i class="fas fa-tasks"></i>
            <span>ä»»åŠ¡æäº¤</span>
        </div>
    </div>
    
    <footer>
        <p>æ¸©é¦¨æç¤ºï¼šæ”¶ç›Šå› äººè€Œå¼‚ï¼Œå¤šåŠ³å¤šå¾—</p>
        <p>Â© 2023-2027 æ˜Ÿçƒæ¸¸æˆæ¨å¹¿å¹³å° ç‰ˆæƒæ‰€æœ‰</p>
    </footer>

    <script>
        // ä½¿ç”¨localStorageæ¨¡æ‹Ÿæ•°æ®åº“
        if (!localStorage.getItem('users')) {
            localStorage.setItem('users', JSON.stringify([]));
        }
        
        if (!localStorage.getItem('tasks')) {
            localStorage.setItem('tasks', JSON.stringify([
                { id: 1, type: 'follow', name: 'å¿«æ‰‹è´¦å·å…³æ³¨', reward: 0.1, desc: 'å…³æ³¨æ˜Ÿçƒæ¸¸æˆå¿«æ‰‹å®˜æ–¹è´¦å·' },
                { id: 2, type: 'download', name: 'ä¸‹è½½å®‰è£…æ¸¸æˆ', reward: 5, desc: 'ä¸‹è½½å¹¶å®‰è£…æ˜Ÿçƒæ¸¸æˆçš„æŒ‡å®šæ¸¸æˆ' }
            ]));
        }
        
        if (!localStorage.getItem('userTasks')) {
            localStorage.setItem('userTasks', JSON.stringify([]));
        }
        
        if (!localStorage.getItem('earnings')) {
            localStorage.setItem('earnings', JSON.stringify([]));
        }
        
        if (!localStorage.getItem('withdrawals')) {
            localStorage.setItem('withdrawals', JSON.stringify([]));
        }
        
        // å­˜å‚¨ä¸Šä¼ çš„å›¾ç‰‡å“ˆå¸Œå€¼
        if (!localStorage.getItem('imageHashes')) {
            localStorage.setItem('imageHashes', JSON.stringify([]));
        }
        
        // å½“å‰ç”¨æˆ·çŠ¶æ€
        let currentUser = null;
        
        // éŸ³ä¹çŠ¶æ€
        let isMusicPlaying = false;
        const bgMusic = document.getElementById('bg-music');
        const clickSound = document.getElementById('click-sound');
        
        // éšæœºä¸­æ–‡åå­—ç”Ÿæˆ
        const FIRST_NAMES = ['å¼ ', 'æ', 'ç‹', 'åˆ˜', 'é™ˆ', 'æ¨', 'èµµ', 'é»„', 'å‘¨', 'å´', 'å¾', 'å­™', 'èƒ¡', 'æœ±', 'é«˜', 'æ—', 'ä½•', 'éƒ­', 'é©¬', 'ç½—'];
        const LAST_NAMES = ['ä¼Ÿ', 'èŠ³', 'å¨œ', 'ç§€è‹±', 'æ•', 'é™', 'ä¸½', 'å¼º', 'ç£Š', 'å†›', 'æ´‹', 'å‹‡', 'è‰³', 'æ°', 'å¨Ÿ', 'æ¶›', 'æ˜', 'è¶…', 'ç§€å…°', 'éœ'];
        
        function generateRandomName() {
            const firstName = FIRST_NAMES[Math.floor(Math.random() * FIRST_NAMES.length)];
            const lastName = LAST_NAMES[Math.floor(Math.random() * LAST_NAMES.length)];
            return firstName + lastName;
        }
        
        // æ’­æ”¾ç‚¹å‡»éŸ³æ•ˆ
        function playClickSound() {
            clickSound.currentTime = 0;
            clickSound.play().catch(e => console.log('æ— æ³•æ’­æ”¾ç‚¹å‡»éŸ³æ•ˆ:', e));
        }
        
        // åˆ‡æ¢éŸ³ä¹æ’­æ”¾çŠ¶æ€
        function toggleMusic() {
            playClickSound();
            if (isMusicPlaying) {
                bgMusic.pause();
                document.getElementById('music-control').innerHTML = '<i class="fas fa-music"></i>';
            } else {
                bgMusic.play().catch(e => console.log('æ— æ³•æ’­æ”¾èƒŒæ™¯éŸ³ä¹:', e));
                document.getElementById('music-control').innerHTML = '<i class="fas fa-pause"></i>';
            }
            isMusicPlaying = !isMusicPlaying;
        }
        
        // æ˜¾ç¤ºç”¨æˆ·é¡»çŸ¥
        function showNotice() {
            document.getElementById('notice-modal').style.display = 'flex';
        }
        
        // éšè—ç”¨æˆ·é¡»çŸ¥
        function hideNotice() {
            playClickSound();
            document.getElementById('notice-modal').style.display = 'none';
            localStorage.setItem('noticeShown', 'true');
        }
        
        // é¢„è§ˆæˆªå›¾
        function previewProof() {
            const file = document.getElementById('task-proof').files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const preview = document.getElementById('proof-preview');
                    preview.src = e.target.result;
                    preview.style.display = 'block';
                    
                    // æ›´æ–°ä¸Šä¼ åŒºåŸŸæ˜¾ç¤º
                    const uploadArea = document.querySelector('.upload-area');
                    uploadArea.innerHTML = `
                        <i class="fas fa-check-circle" style="color: green;"></i>
                        <div class="upload-text">æˆªå›¾å·²ä¸Šä¼ </div>
                        <div style="font-size: 12px; color: var(--light-text);">${file.name}</div>
                    `;
                }
                reader.readAsDataURL(file);
            }
        }
        
        // æ›´æ–°æˆªå›¾è¦æ±‚æç¤º
        function updateProofRequirement() {
            const taskType = document.getElementById('task-type').value;
            const requirementText = taskType === 'follow' 
                ? 'è¯·ä¸Šä¼ å¿«æ‰‹å…³æ³¨æˆªå›¾ï¼Œéœ€æ¸…æ™°æ˜¾ç¤ºå…³æ³¨çŠ¶æ€' 
                : 'è¯·ä¸Šä¼ 5åˆ†é’Ÿä»¥ä¸Šçš„æ¸¸æˆæ¸¸ç©è®°å½•æˆªå›¾ï¼Œéœ€æ˜¾ç¤ºæ¸¸æˆIDå’Œæ—¶é—´';
            document.getElementById('proof-requirement').textContent = requirementText;
            
            // é‡ç½®ä¸Šä¼ åŒºåŸŸæ˜¾ç¤º
            const uploadArea = document.querySelector('.upload-area');
            uploadArea.innerHTML = `
                <i class="fas fa-cloud-upload-alt"></i>
                <div class="upload-text">ç‚¹å‡»ä¸Šä¼ æˆªå›¾</div>
                <div style="font-size: 12px; color: var(--light-text);">${requirementText}</div>
            `;
            
            // éšè—é¢„è§ˆ
            document.getElementById('proof-preview').style.display = 'none';
        }
        
        // è®¡ç®—å›¾ç‰‡çš„ç®€å•å“ˆå¸Œå€¼ï¼ˆæ¨¡æ‹Ÿï¼‰
        async function calculateImageHash(file) {
            return new Promise((resolve) => {
                const reader = new FileReader();
                reader.onload = function(e) {
                    // åœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿™é‡Œåº”è¯¥ä½¿ç”¨æ›´å¤æ‚çš„å“ˆå¸Œç®—æ³•
                    // è¿™é‡Œæˆ‘ä»¬ç®€å•ä½¿ç”¨æ–‡ä»¶å¤§å°å’Œéƒ¨åˆ†æ•°æ®ä½œä¸ºå“ˆå¸Œ
                    const content = e.target.result;
                    const size = file.size;
                    const hash = size + '_' + content.length + '_' + content.slice(0, 20);
                    resolve(hash);
                };
                reader.readAsDataURL(file);
            });
        }
        
        // æ£€æŸ¥å›¾ç‰‡æ˜¯å¦é‡å¤
        async function checkDuplicateImage(file) {
            const hash = await calculateImageHash(file);
            const imageHashes = JSON.parse(localStorage.getItem('imageHashes'));
            
            if (imageHashes.includes(hash)) {
                return true; // å›¾ç‰‡å·²å­˜åœ¨
            }
            
            // ä¿å­˜æ–°å›¾ç‰‡çš„å“ˆå¸Œ
            imageHashes.push(hash);
            localStorage.setItem('imageHashes', JSON.stringify(imageHashes));
            return false;
        }
        
        // DOMåŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // æ£€æŸ¥æ˜¯å¦ç¬¬ä¸€æ¬¡è®¿é—®ï¼Œæ˜¾ç¤ºç”¨æˆ·é¡»çŸ¥
            if (!localStorage.getItem('noticeShown')) {
                setTimeout(showNotice, 1000);
            }
            
            checkLoginStatus();
            updateStats();
            
            // ä¸ºæ‰€æœ‰æŒ‰é’®æ·»åŠ ç‚¹å‡»éŸ³æ•ˆ
            document.querySelectorAll('button, [onclick], .tab-item, .user-avatar').forEach(el => {
                el.addEventListener('click', playClickSound);
            });
            
            // ä»»åŠ¡ç±»å‹å˜åŒ–æ—¶æ›´æ–°æˆªå›¾è¦æ±‚
            document.getElementById('task-type').addEventListener('change', updateProofRequirement);
            
            // åˆå§‹åŒ–æˆªå›¾è¦æ±‚æç¤º
            updateProofRequirement();
            
            // å°è¯•è‡ªåŠ¨æ’­æ”¾éŸ³ä¹
            bgMusic.volume = 0.3;
            const playPromise = bgMusic.play();
            
            if (playPromise !== undefined) {
                playPromise.then(_ => {
                    // è‡ªåŠ¨æ’­æ”¾æˆåŠŸ
                    isMusicPlaying = true;
                    document.getElementById('music-control').innerHTML = '<i class="fas fa-pause"></i>';
                })
                .catch(error => {
                    // è‡ªåŠ¨æ’­æ”¾å¤±è´¥ï¼Œç­‰å¾…ç”¨æˆ·äº¤äº’
                    document.addEventListener('click', function firstInteraction() {
                        bgMusic.play().then(() => {
                            isMusicPlaying = true;
                            document.getElementById('music-control').innerHTML = '<i class="fas fa-pause"></i>';
                        }).catch(e => console.log('æ’­æ”¾å¤±è´¥:', e));
                        document.removeEventListener('click', firstInteraction);
                    }, { once: true });
                });
            }
            
            // ä¿æŒéŸ³ä¹æ’­æ”¾çŠ¶æ€
            document.addEventListener('visibilitychange', function() {
                if (!document.hidden && isMusicPlaying) {
                    bgMusic.play().catch(e => console.log('æ¢å¤æ’­æ”¾å¤±è´¥:', e));
                }
            });
            
            // æ¯5åˆ†é’Ÿåˆ·æ–°èµšé’±æ¦œ
            setInterval(updateEarningsLeaderboard, 5 * 60 * 1000);
            updateEarningsLeaderboard();
        });
        
        // æ›´æ–°èµšé’±æ¦œ
        function updateEarningsLeaderboard() {
            const userTasks = JSON.parse(localStorage.getItem('userTasks'));
            const users = JSON.parse(localStorage.getItem('users'));
            
            // è·å–ä»Šæ—¥å®Œæˆçš„ä¸‹è½½ä»»åŠ¡
            const todayDownloadTasks = userTasks.filter(t => 
                t.type === 'download' && 
                t.status === 'approved' &&
                new Date(t.submitTime).toDateString() === new Date().toDateString()
            );
            
            // æŒ‰ç”¨æˆ·åˆ†ç»„ç»Ÿè®¡
            const userEarnings = {};
            todayDownloadTasks.forEach(task => {
                if (!userEarnings[task.userId]) {
                    userEarnings[task.userId] = {
                        count: 0,
                        earnings: 0
                    };
                }
                userEarnings[task.userId].count += task.count;
                userEarnings[task.userId].earnings += task.reward;
            });
            
            // è½¬æ¢ä¸ºæ•°ç»„å¹¶æ’åº
            let leaderboard = Object.entries(userEarnings)
                .map(([userId, data]) => ({
                    userId: parseInt(userId),
                    count: data.count,
                    earnings: data.earnings
                }))
                .sort((a, b) => b.earnings - a.earnings);
            
            // å¦‚æœæ²¡æœ‰çœŸå®ç”¨æˆ·æ•°æ®ï¼Œç”Ÿæˆä¸€äº›æœºå™¨äººæ•°æ®
            if (leaderboard.length === 0) {
                leaderboard = [
                    { userId: -1, count: 86, earnings: 430, isBot: true, name: generateRandomName() },
                    { userId: -2, count: 52, earnings: 260, isBot: true, name: generateRandomName() },
                    { userId: -3, count: 38, earnings: 190, isBot: true, name: generateRandomName() }
                ];
            } else if (leaderboard.length < 3) {
                // è¡¥å……æœºå™¨äººæ•°æ®
                const botCount = 3 - leaderboard.length;
                for (let i = 0; i < botCount; i++) {
                    leaderboard.push({
                        userId: -(i + 4),
                        count: Math.floor(Math.random() * 30) + 20,
                        earnings: Math.floor(Math.random() * 150) + 100,
                        isBot: true,
                        name: generateRandomName()
                    });
                }
                // é‡æ–°æ’åº
                leaderboard.sort((a, b) => b.earnings - a.earnings);
            }
            
            // åªå–å‰ä¸‰å
            leaderboard = leaderboard.slice(0, 3);
            
            // ç”ŸæˆHTML
            let leaderboardHtml = '';
            
            leaderboard.forEach((item, index) => {
                const user = users.find(u => u.id === item.userId);
                let name, shortName;
                
                if (item.isBot) {
                    name = item.name;
                    shortName = name.length > 2 ? name.charAt(0) + '*' : name;
                } else {
                    name = user ? user.name : 'åŒ¿åç”¨æˆ·';
                    shortName = name.length > 2 ? name.charAt(0) + '*' : name;
                }
                
                // éšæœºç”Ÿæˆæ—¶é—´
                const hoursAgo = 3 - index;
                const timeText = hoursAgo === 0 ? '30åˆ†é’Ÿå‰' : `${hoursAgo}å°æ—¶å‰`;
                
                leaderboardHtml += `
                    <div class="user-item">
                        <div class="user-avatar-small">${shortName}</div>
                        <div class="user-info">
                            <div>æ¨å¹¿${item.count}äººä¸‹è½½</div>
                            <div style="font-size:12px;color:#999;">${timeText}</div>
                        </div>
                        <div class="user-earnings">+Â¥${item.earnings.toFixed(0)}</div>
                    </div>
                `;
            });
            
            document.getElementById('earnings-leaderboard').innerHTML = leaderboardHtml;
        }
        
        // åˆ‡æ¢æ ‡ç­¾é¡µ
        function switchTab(tabName) {
            playClickSound();
            document.querySelectorAll('.tab-item').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.getElementById('home-tab').style.display = 'none';
            document.getElementById('earnings-tab').style.display = 'none';
            document.getElementById('task-tab').style.display = 'none';
            
            document.getElementById(tabName + '-tab').style.display = 'block';
            
            // æ‰¾åˆ°å¯¹åº”çš„tabæŒ‰é’®å¹¶æ¿€æ´»
            const tabBtns = document.querySelectorAll('.tab-item');
            tabBtns.forEach(btn => {
                if (btn.textContent.includes(tabName === 'home' ? 'é¦–é¡µ' : 
                                           tabName === 'earnings' ? 'æ”¶ç›Š' : 'ä»»åŠ¡')) {
                    btn.classList.add('active');
                }
            });
            
            // å¦‚æœæ˜¯æ”¶ç›Šæˆ–ä»»åŠ¡é¡µï¼Œæ£€æŸ¥ç™»å½•çŠ¶æ€
            if ((tabName === 'earnings' || tabName === 'task') && !currentUser) {
                showLoginForm();
                switchTab('home');
            }
        }
        
        // æ˜¾ç¤º/éšè—ç”¨æˆ·èœå•
        function toggleUserMenu() {
            const menu = document.getElementById('user-menu');
            if (menu.style.display === 'block') {
                menu.style.display = 'none';
            } else {
                menu.style.display = 'block';
            }
        }
        
        // å…³é—­æ‰€æœ‰å¼¹å‡ºå±‚
        function closeAllPopups() {
            document.getElementById('user-menu').style.display = 'none';
            document.getElementById('login-modal').style.display = 'none';
            document.getElementById('withdraw-modal').style.display = 'none';
        }
        
        // ç‚¹å‡»é¡µé¢å…¶ä»–åœ°æ–¹å…³é—­å¼¹å‡ºå±‚
        document.addEventListener('click', function(e) {
            if (!e.target.closest('#user-avatar') && !e.target.closest('#user-menu')) {
                document.getElementById('user-menu').style.display = 'none';
            }
        });
        
        // æ˜¾ç¤ºç™»å½•è¡¨å•
        function showLoginForm() {
            playClickSound();
            closeAllPopups();
            document.getElementById('login-modal').style.display = 'flex';
        }
        
        // éšè—ç™»å½•è¡¨å•
        function hideLoginForm() {
            playClickSound();
            document.getElementById('login-modal').style.display = 'none';
        }
        
        // æ˜¾ç¤ºæç°æ¨¡æ€æ¡†
        function showWithdrawModal() {
            playClickSound();
            if (!currentUser) {
                showLoginForm();
                return;
            }
            
            document.getElementById('withdraw-amount').value = '';
            document.getElementById('withdraw-account').value = '';
            document.getElementById('withdraw-modal').style.display = 'flex';
        }
        
        // éšè—æç°æ¨¡æ€æ¡†
        function hideWithdrawModal() {
            playClickSound();
            document.getElementById('withdraw-modal').style.display = 'none';
        }
        
        // å‘é€éªŒè¯ç 
        document.getElementById('send-code-btn').addEventListener('click', function() {
            playClickSound();
            const phone = document.getElementById('login-phone').value;
            if (!phone || !/^1[3-9]\d{9}$/.test(phone)) {
                alert('è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå·ç ');
                return;
            }
            
            this.disabled = true;
            let countdown = 60;
            this.textContent = `${countdown}ç§’åé‡è¯•`;
            
            const timer = setInterval(() => {
                countdown--;
                this.textContent = `${countdown}ç§’åé‡è¯•`;
                
                if (countdown <= 0) {
                    clearInterval(timer);
                    this.disabled = false;
                    this.textContent = 'è·å–éªŒè¯ç ';
                }
            }, 1000);
            
            // æ¨¡æ‹Ÿå‘é€éªŒè¯ç 
            alert(`éªŒè¯ç å·²å‘é€è‡³ ${phone}ï¼Œæµ‹è¯•éªŒè¯ç ä¸ºï¼š123456`);
        });
        
        // ç”¨æˆ·ç™»å½•
        function userLogin() {
            playClickSound();
            const phone = document.getElementById('login-phone').value;
            const code = document.getElementById('login-code').value;
            
            if (!phone || !code) {
                alert('è¯·è¾“å…¥æ‰‹æœºå·å’ŒéªŒè¯ç ');
                return;
            }
            
            // æµ‹è¯•éªŒè¯ç ä¸º123456
            if (code !== '123456') {
                alert('éªŒè¯ç é”™è¯¯');
                return;
            }
            
            // æŸ¥æ‰¾æˆ–åˆ›å»ºç”¨æˆ·
            const users = JSON.parse(localStorage.getItem('users'));
            let user = users.find(u => u.phone === phone);
            
            if (!user) {
                user = {
                    id: Date.now(),
                    phone: phone,
                    name: 'ç”¨æˆ·' + phone.slice(-4),
                    registerTime: new Date().toISOString(),
                    earnings: 0,
                    withdrawable: 0,
                    lastTaskTime: {}
                };
                users.push(user);
                localStorage.setItem('users', JSON.stringify(users));
            }
            
            currentUser = user;
            
            updateUserDisplay();
            hideLoginForm();
            
            // å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡ç™»å½•ï¼Œæ˜¾ç¤ºæ¬¢è¿æ¶ˆæ¯
            if (!user.hasLoggedIn) {
                alert(`æ¬¢è¿åŠ å…¥æ˜Ÿçƒæ¸¸æˆæ¨å¹¿å¹³å°ï¼æ‚¨çš„é‚€è¯·ç æ˜¯ï¼š${user.id}`);
                user.hasLoggedIn = true;
                localStorage.setItem('users', JSON.stringify(users));
            }
        }
        
        // é€€å‡ºç™»å½•
        function logout() {
            playClickSound();
            currentUser = null;
            updateUserDisplay();
            switchTab('home');
        }
        
        // æ£€æŸ¥ç™»å½•çŠ¶æ€
        function checkLoginStatus() {
            // è¿™é‡Œç®€åŒ–å¤„ç†ï¼Œå®é™…åº”ç”¨ä¸­åº”è¯¥æ£€æŸ¥sessionæˆ–token
            if (currentUser) {
                updateUserDisplay();
            }
        }
        
        // æ›´æ–°ç”¨æˆ·æ˜¾ç¤º
        function updateUserDisplay() {
            if (currentUser) {
                document.getElementById('username-display').textContent = currentUser.name;
                document.getElementById('logout-btn').style.display = 'block';
                
                // æ›´æ–°æ”¶ç›Šæ•°æ®
                updateEarningsDisplay();
                updateTaskHistory();
            } else {
                document.getElementById('username-display').textContent = 'æœªç™»å½•';
                document.getElementById('logout-btn').style.display = 'none';
            }
        }
        
        // æ›´æ–°æ”¶ç›Šæ˜¾ç¤º
        function updateEarningsDisplay() {
            if (!currentUser) return;
            
            const earnings = JSON.parse(localStorage.getItem('earnings'));
            const userEarnings = earnings.filter(e => e.userId === currentUser.id);
            
            // è®¡ç®—å„ç§æ”¶ç›Š
            const todayEarnings = userEarnings
                .filter(e => new Date(e.time).toDateString() === new Date().toDateString())
                .reduce((sum, e) => sum + e.amount, 0);
            
            const currentMonth = new Date().getMonth();
            const monthEarnings = userEarnings
                .filter(e => new Date(e.time).getMonth() === currentMonth)
                .reduce((sum, e) => sum + e.amount, 0);
            
            const totalEarnings = userEarnings.reduce((sum, e) => sum + e.amount, 0);
            
            document.getElementById('today-earnings').textContent = `Â¥${todayEarnings.toFixed(2)}`;
            document.getElementById('month-earnings').textContent = `Â¥${monthEarnings.toFixed(2)}`;
            document.getElementById('total-earnings').textContent = `Â¥${totalEarnings.toFixed(2)}`;
            document.getElementById('withdrawable-amount').textContent = `Â¥${currentUser.withdrawable.toFixed(2)}`;
            
            // æ›´æ–°æç°æŒ‰é’®çŠ¶æ€
            document.getElementById('withdraw-btn').disabled = currentUser.withdrawable < 10;
            
            // æ›´æ–°æ”¶ç›Šæ˜ç»†
            updateEarningsDetails();
        }
        
        // æ›´æ–°æ”¶ç›Šæ˜ç»†
        function updateEarningsDetails() {
            const earnings = JSON.parse(localStorage.getItem('earnings'));
            const userEarnings = earnings.filter(e => e.userId === currentUser.id);
            
            if (userEarnings.length === 0) {
                document.getElementById('earnings-details').innerHTML = `
                    <div style="text-align: center; padding: 30px; color: var(--light-text);">
                        <i class="fas fa-wallet" style="font-size: 40px; margin-bottom: 10px;"></i>
                        <p>æš‚æ— æ”¶ç›Šè®°å½•</p>
                    </div>
                `;
                return;
            }
            
            const detailsHtml = userEarnings.map(e => `
                <div class="price-item">
                    <div>
                        <div>${e.type === 'follow' ? 'å¿«æ‰‹è´¦å·å…³æ³¨' : 
                              e.type === 'download' ? 'æ¸¸æˆä¸‹è½½' : 'æœªçŸ¥ä»»åŠ¡'}</div>
                        <div style="font-size:12px;color:#999;">${new Date(e.time).toLocaleString()}</div>
                    </div>
                    <div class="highlight">+Â¥${e.amount.toFixed(2)}</div>
                </div>
            `).join('');
            
            document.getElementById('earnings-details').innerHTML = detailsHtml;
        }
        
        // æäº¤ä»»åŠ¡
        async function submitTask() {
            playClickSound();
            if (!currentUser) {
                showLoginForm();
                return;
            }
            
            const type = document.getElementById('task-type').value;
            const count = parseInt(document.getElementById('task-count').value);
            const proof = document.getElementById('task-proof').files[0];
            const remark = document.getElementById('task-remark').value;
            
            if (!count || count <= 0) {
                alert('è¯·è¾“å…¥æœ‰æ•ˆçš„æ¨å¹¿äººæ•°');
                return;
            }
            
            if (!proof) {
                alert('è¯·ä¸Šä¼ æ¨å¹¿æˆªå›¾è¯æ˜');
                return;
            }
            
            // æ£€æŸ¥å›¾ç‰‡æ˜¯å¦é‡å¤
            const isDuplicate = await checkDuplicateImage(proof);
            if (isDuplicate) {
                alert('ä»»åŠ¡å®¡æ ¸æœªé€šè¿‡ï¼šæ£€æµ‹åˆ°é‡å¤ä½¿ç”¨ç›¸åŒçš„æˆªå›¾');
                return;
            }
            
            // è·å–ä»»åŠ¡å¥–åŠ±æ ‡å‡†
            const tasks = JSON.parse(localStorage.getItem('tasks'));
            const task = tasks.find(t => t.type === type);
            
            if (!task) {
                alert('ä»»åŠ¡ç±»å‹é”™è¯¯');
                return;
            }
            
            // åˆ›å»ºç”¨æˆ·ä»»åŠ¡è®°å½•
            const userTasks = JSON.parse(localStorage.getItem('userTasks'));
            const newTask = {
                id: Date.now(),
                userId: currentUser.id,
                taskId: task.id,
                type: task.type,
                count: count,
                status: 'pending',
                proof: 'å·²ä¸Šä¼ ', // å®é™…åº”ç”¨ä¸­åº”è¯¥ä¸Šä¼ åˆ°æœåŠ¡å™¨
                remark: remark,
                submitTime: new Date().toISOString(),
                reward: task.reward * count
            };
            
            userTasks.push(newTask);
            localStorage.setItem('userTasks', JSON.stringify(userTasks));
            
            // æ›´æ–°ç”¨æˆ·æœ€åä»»åŠ¡æ—¶é—´
            const users = JSON.parse(localStorage.getItem('users'));
            const user = users.find(u => u.id === currentUser.id);
            if (user) {
                if (!user.lastTaskTime) user.lastTaskTime = {};
                user.lastTaskTime[type] = new Date().toISOString();
                localStorage.setItem('users', JSON.stringify(users));
                currentUser.lastTaskTime = user.lastTaskTime;
            }
            
            // æ¸…ç©ºè¡¨å•
            document.getElementById('task-count').value = '';
            document.getElementById('task-proof').value = '';
            document.getElementById('proof-preview').style.display = 'none';
            document.getElementById('task-remark').value = '';
            
            // é‡ç½®ä¸Šä¼ åŒºåŸŸæ˜¾ç¤º
            const uploadArea = document.querySelector('.upload-area');
            uploadArea.innerHTML = `
                <i class="fas fa-cloud-upload-alt"></i>
                <div class="upload-text">ç‚¹å‡»ä¸Šä¼ æˆªå›¾</div>
                <div style="font-size: 12px; color: var(--light-text);" id="proof-requirement">${type === 'follow' ? 'è¯·ä¸Šä¼ å¿«æ‰‹å…³æ³¨æˆªå›¾' : 'è¯·ä¸Šä¼ æ¸¸æˆæ¸¸ç©è®°å½•æˆªå›¾'}</div>
            `;
            
            // è‡ªåŠ¨å®¡æ ¸ä»»åŠ¡
            setTimeout(() => {
                // æ¨¡æ‹Ÿæ£€æŸ¥å›¾ç‰‡å†…å®¹
                const isValidImage = Math.random() < 0.8; // 80%æ¦‚ç‡é€šè¿‡
                
                if (isValidImage) {
                    // å®¡æ ¸é€šè¿‡
                    const earnings = JSON.parse(localStorage.getItem('earnings'));
                    earnings.push({
                        id: Date.now(),
                        userId: currentUser.id,
                        type: type,
                        amount: task.reward * count,
                        time: new Date().toISOString(),
                        taskId: newTask.id
                    });
                    
                    localStorage.setItem('earnings', JSON.stringify(earnings));
                    
                    // æ›´æ–°ç”¨æˆ·å¯æç°ä½™é¢
                    const users = JSON.parse(localStorage.getItem('users'));
                    const user = users.find(u => u.id === currentUser.id);
                    if (user) {
                        user.withdrawable += task.reward * count;
                        localStorage.setItem('users', JSON.stringify(users));
                        currentUser.withdrawable = user.withdrawable;
                        updateUserDisplay();
                    }
                    
                    // æ›´æ–°ä»»åŠ¡çŠ¶æ€
                    newTask.status = 'approved';
                    newTask.reviewTime = new Date().toISOString();
                    localStorage.setItem('userTasks', JSON.stringify(userTasks));
                    
                    alert('ä»»åŠ¡å·²è‡ªåŠ¨å®¡æ ¸é€šè¿‡ï¼');
                } else {
                    // å®¡æ ¸ä¸é€šè¿‡
                    newTask.status = 'rejected';
                    newTask.reviewTime = new Date().toISOString();
                    localStorage.setItem('userTasks', JSON.stringify(userTasks));
                    
                    alert('ä»»åŠ¡å®¡æ ¸æœªé€šè¿‡ï¼šæˆªå›¾ä¸ä»»åŠ¡ä¸ç¬¦');
                }
                
                // æ›´æ–°ä»»åŠ¡å†å²
                updateTaskHistory();
                // æ›´æ–°èµšé’±æ¦œ
                updateEarningsLeaderboard();
            }, 1000);
        }
        
        // æ›´æ–°ä»»åŠ¡å†å²
        function updateTaskHistory() {
            if (!currentUser) return;
            
            const userTasks = JSON.parse(localStorage.getItem('userTasks'));
            const tasks = JSON.parse(localStorage.getItem('tasks'));
            
            const userTaskHistory = userTasks
                .filter(t => t.userId === currentUser.id)
                .map(t => {
                    const task = tasks.find(task => task.id === t.taskId);
                    return {
                        ...t,
                        taskName: task ? task.name : 'æœªçŸ¥ä»»åŠ¡'
                    };
                })
                .sort((a, b) => new Date(b.submitTime) - new Date(a.submitTime));
            
            if (userTaskHistory.length === 0) {
                document.getElementById('task-history').innerHTML = `
                    <div style="text-align: center; padding: 30px; color: var(--light-text);">
                        <i class="fas fa-history" style="font-size: 40px; margin-bottom: 10px;"></i>
                        <p>æš‚æ— ä»»åŠ¡è®°å½•</p>
                    </div>
                `;
                return;
            }
            
            const historyHtml = userTaskHistory.map(t => `
                <div class="task-item">
                    <div>
                        <div><strong>${t.taskName}</strong> Ã— ${t.count}</div>
                        <div style="font-size:12px;color:#999;">${new Date(t.submitTime).toLocaleString()}</div>
                        <div style="font-size:12px;">
                            çŠ¶æ€: <span class="status-label ${'status-' + t.status}">${
                                t.status === 'approved' ? 'å·²é€šè¿‡' : 
                                t.status === 'rejected' ? 'å·²æ‹’ç»' : 'å¾…å®¡æ ¸'
                            }</span>
                        </div>
                    </div>
                    <div class="user-earnings">Â¥${t.reward.toFixed(2)}</div>
                </div>
            `).join('');
            
            document.getElementById('task-history').innerHTML = historyHtml;
        }
        
        // æäº¤æç°ç”³è¯·
        function submitWithdraw() {
            playClickSound();
            const amount = parseFloat(document.getElementById('withdraw-amount').value);
            const method = document.getElementById('withdraw-method').value;
            const account = document.getElementById('withdraw-account').value;
            
            if (!amount || amount <= 0 || !account) {
                alert('è¯·è¾“å…¥æœ‰æ•ˆçš„æç°é‡‘é¢å’Œæ”¶æ¬¾è´¦å·');
                return;
            }
            
            if (amount > currentUser.withdrawable) {
                alert('æç°é‡‘é¢ä¸èƒ½è¶…è¿‡å¯æç°ä½™é¢');
                return;
            }
            
            if (amount < 10) {
                alert('æœ€ä½æç°é‡‘é¢ä¸º10å…ƒ');
                return;
            }
            
            // åˆ›å»ºæç°è®°å½•
            const withdrawals = JSON.parse(localStorage.getItem('withdrawals'));
            const newWithdrawal = {
                id: Date.now(),
                userId: currentUser.id,
                amount: amount,
                method: method,
                account: account,
                status: 'pending',
                applyTime: new Date().toISOString(),
                fee: amount * 0.02,
                contactQQ: '3965723380'
            };
            
            withdrawals.push(newWithdrawal);
            localStorage.setItem('withdrawals', JSON.stringify(withdrawals));
            
            // æ›´æ–°ç”¨æˆ·å¯æç°ä½™é¢
            const users = JSON.parse(localStorage.getItem('users'));
            const user = users.find(u => u.id === currentUser.id);
            if (user) {
                user.withdrawable -= amount;
                localStorage.setItem('users', JSON.stringify(users));
                currentUser.withdrawable = user.withdrawable;
                updateUserDisplay();
            }
            
            alert('æç°ç”³è¯·å·²æäº¤ï¼Œè¯·æ·»åŠ QQ: 3965723380 è”ç³»å¤„ç†');
            hideWithdrawModal();
        }
        
        // æ›´æ–°ç»Ÿè®¡æ•°æ®
        function updateStats() {
            // æ¨¡æ‹Ÿæ›´æ–°ä»Šæ—¥å‚ä¸äººæ•°å’Œæœ€é«˜æ”¶ç›Š
            document.getElementById('today-users').textContent = Math.floor(Math.random() * 100) + 200;
            document.getElementById('max-earnings').textContent = Math.floor(Math.random() * 200) + 200;
        }
    </script>
</body>
</html>
